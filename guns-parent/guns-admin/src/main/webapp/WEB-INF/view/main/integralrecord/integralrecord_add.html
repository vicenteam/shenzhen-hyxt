@layout("/common/_container.html"){
<script type="text/javascript"
        src="http://cdn.bootcss.com/bootstrap-select/2.0.0-beta1/js/bootstrap-select.js"></script>
<link rel="stylesheet" type="text/css"
      href="http://cdn.bootcss.com/bootstrap-select/2.0.0-beta1/css/bootstrap-select.css">
<script src="https://cdn.bootcss.com/bootstrap-select/2.0.0-beta1/js/i18n/defaults-zh_CN.js"></script>
<!--<link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">-->
<!--<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>-->

<script type="text/javascript">
    $(window).on('load', function () {


    });


</script>
<div id="hiddenDiv0" style="display:none;font-size: 10px;text-align: center;width: 260px;">
    欢迎光临
    <table style="text-align: center;border: 1px dashed black">
        <thead>
        <tr>
            <td style="width: 140px" id="a_1">商品名称</td>
            <td style="width: 40px" id="a_3">零售价</td>
            <td style="width: 40px" id="">亲民价</td>
            <td style="width: 40px" id="a_4">数量</td>
        </tr>
        </thead>
        <tbody id="storeInfoHidden" style="font-size: 10px">
        </tbody>
    </table>

    <!--金额-->
    <div style="border: 1px dashed black;width: 260px;margin-top: 5px;text-align: left" id="hiden_moneyText">
    </div>
    <div style="width: 250px;text-align: right">

        <label id="showHiden" ></label>
    </div>
</div>
<div class="ibox float-e-margins" id="hiddenDiv1">
    <div class="ibox-content">
        <div class="form-horizontal" id="integralrecordInfoTable">
            <input type="hidden" id="introducerId" name="introducerId"/>
            <input type="hidden" id="cardCode" name="cardCode"/>
            <div class="row">
                <div class="col-sm-4 b-r">
                    <input type="hidden" id="offNum" value="1">
                    <#input id="introducerName" name="身份证号" underline="true" button="读卡" buttonId="read"
                    disabled="disabled"/>
                    <#input id="name" name="会员名称" underline="true" disabled="disabled"/>
                    <#input id="levelID" name="会员等级" underline="true" disabled="disabled"/>
                    <#input id="address" name="联系地址" underline="true" disabled="disabled"/>
                    <#input id="countPrice" name="可用积分" underline="true" disabled="disabled"/>
                    <div class="form-group" style="display: none">
                        <label class="col-sm-3 control-label">商品类型</label>
                        <div class="col-sm-9">
                            <select class="form-control" id="typeId" name="typeId" style="width: 26%">
                                <option value="">全部</option>
                                <option value="0">礼品类</option>
                                <option value="1">积分兑换类</option>
                                <option value="2">销售类</option>
                                <option value="3">积分+金额类</option>

                            </select>
                            <select class="selectpicker" id="productname" data-live-search="true" style="width: 30%">
                            </select>
                        </div>
                    </div>
                    <div class="hr-line-dashed">
                    </div>
                    <#input id="play" name="支付金额" display="none" underline="true" divId="divplay"/>
                    <#select id="playType" name="支付方式" underline="true">
                    <option value="0">账户余额</option>
                    <option value="1">现金支付</option>
                    <option value="2">支付宝</option>
                    <option value="3">微信</option>
                    <option value="4">其他</option>
                    <option value="5">积分消费</option>
                </#select>
                <div id="hiddenYz"><#input id="verificationcode" name="验证码" underline="true" class="fa fa-paper-plane-o" button="发送" buttonId="sendCode" /></div>
                <div class="form-group" style="display: none">
                    <label class="col-sm-3 control-label">购买数量</label>
                    <div class="col-sm-9">
                        <li class="fa fa-chevron-circle-left"
                            style="width: 20px;font-size: 20px;color: #00B83F;cursor:pointer" id="less"></li>
                        <input class="form-control" type="text" style="text-align: center;width: 50px" value="1"
                               id="consumptionNum" name="consumptionNum" disabled="disabled">
                        <li class="fa fa-chevron-circle-right"
                            style=" width: 20px;font-size: 20px;color: #00B83F;cursor:pointer" id="more"></li>
                    </div>
                </div>
                <div class="hr-line-dashed">
                </div>
                <#input id="integral" name="获得积分的值" disabled="disabled" underline="true"/>
            </div>

            <div class="col-sm-7 b-r">
                <iframe name="iframe0" width="100%" height="100%"  id="iframe_map_canvasInfo" src="${ctxPath}/receiptsInfo/receiptsInfo_update/18" style="display: none;">

                    <html>
                        <head></head>
                    <body>
                    <div>33
                        <img style="" src="data:image/png;base64,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">
                        <OBJECT ID='WebBrowser' NAME="WebBrowser" WIDTH=0 HEIGHT=0 CLASSID='CLSID:8856F961-340A-11D0-A96B-00C04FD705A2'></OBJECT>
                    </div>
                    </body>
                    </html>
                </iframe>

                <#input id="scannerCode" name="扫码条信息" underline="true" />
                <#select id="scannerType" name="扫码类型" underline="true">
                <option value="0">商品</option>
                <option value="1">赠品</option>
            </#select>
            <div class="form-group" id="scannerTypeContent" style="display: none;">
                <label class="col-sm-3 control-label">赠品说明</label>
                <div class="col-sm-9">
                    <input class="form-control" id="scannerTypeContext" name="scannerTypeContext">

                </div>
            </div>
                    <div id="map_canvasInfo">
                        <table class="table" style="text-align: center;">
                            <thead>
                            <tr>
                                <td style="width: 230px;text-align: center">商品名称</td>
                                <td>规格</td>
                                <td>数量</td>
                                <td>单价</td>
                                <td>金额</td>
                            </tr>
                            </thead>
                            <tbody id="storeInfo" style="font-size: 12px">
                            </tbody>
                        </table>
                        <hr/>
                        <label id="show" style="width: 100%;text-align: right"></label>
                    </div>

                <div id="scannerInfo">

                </div>

            </div>
            <input type="hidden" id="memberId">
        </div>

        <div class="row btn-group-m-t">
            <div class="col-sm-10">
                <#button btnCss="info" name="提交" id="ensure" icon="fa-check"
                clickFun="IntegralrecordInfoDlg.addSubmit()"/>
                <#button btnCss="danger" name="取消" id="cancel" icon="fa-eraser"
                clickFun="IntegralrecordInfoDlg.close()"/>
            </div>
        </div>
    </div>

</div>
</div>
<div style="display: none">
    <OBJECT classid=clsid:730BF2F0-EAE2-46C5-BA06-5ABFC9AB8A0A width=0 height=0 align="center"
            codebase="zx_32.cab#version=1,0,0,1" id="CZx_32Ctrl" HSPACE=0 VSPACE=0>
    </OBJECT>
    <div style="display: none">
        <fieldset>
            <legend>设备操作函数组</legend>
            硬件版本号：
            <input type="text" name="Version" id="Account" maxlength="100" size="30">
            产品序列号：
            <input type="text" name="Serial" id="Account" maxlength="100" size="30">
            蜂鸣时间：
            <input type="text" name="BeepTime" id="Account" maxlength="10" size="5" value="10">
            蜂鸣间隔时间：
            <input type="text" name="BeepSpaceTime" id="Account" maxlength="10" size="5" value="10">
            蜂鸣次数：
            <input type="text" name="BeepNum" id="Account" maxlength="10" size="5" value="1">
            句柄信息：
            <input type="text" name="DeviceHandle" id="Account" maxlength="100" size="5" value="-1">

            <form name="设备操作">
                <input type="button" onclick="javascript:OpenDevice()" value="打开设备">
                <input type="button" onclick="javascript:CloseDevice()" value="关闭设备">
                <input type="button" onclick="javascript:DevBeep()" value="蜂鸣">
            </form>
        </fieldset>

        </br>

        <fieldset>
            转换数据：
            <input type="text" name="WriteDataASCHEX" id="Account" maxlength="3000" size="85"
                   value="3030313132323333343435353636">
            转换结果：
            <input type="text" name="ReadDataASCHEX" id="Account" maxlength="3000" size="85">

            <form name="ASCHEX操作">
                <input type="button" onclick="javascript:AscHex()" value="ASC码转HEX码">
                <input type="button" onclick="javascript:HexAsc()" value="HEX码转ASC码">
            </form>
        </fieldset>

        </br>

        <fieldset>
            <legend>操作Eeprom函数组</legend>
            地址：
            <input type="text" name="AddressEeprom" id="Account" maxlength="10" size="5" value="0">
            长度：
            <input type="text" name="LengthEeprom" id="Account" maxlength="10" size="5" value="200">
            写入数据：
            <input type="text" name="WriteDataEeprom" id="Account" maxlength="3000" size="65"
                   value="00112233445566778899AABBCCDDEEFF">
            读出数据：
            <input type="text" name="ReadDataEeprom" id="Account" maxlength="3000" size="65">

            <form name="EEPROM操作">
                <input type="button" onclick="javascript:DevReadeeprom()" value="读Eeprom">
                <input type="button" onclick="javascript:DevWriteeeprom()" value="写Eeprom">
            </form>
        </fieldset>

        </br>

        <fieldset>
            <legend>操作M1卡函数组</legend>
            <label>密码类型：
                <select name="keytypem1" id="keytypem1">
                    <option value="0" SELECTED>A密码</option>
                    <option value="1">B密码</option>
                </select>
            </label>
            密码：
            <input type="text" name="PwdM1" id="Account" maxlength="12" size="20" value="FFFFFFFFFFFF">
            块地址：
            <input type="text" name="BlockM1" id="Account" maxlength="130" size="5" value="10">
            卡片UID：
            <input type="text" name="UidM1" id="Account" maxlength="130" size="20">
            当前块值：
            <input type="text" name="NowValueM1" id="Account" maxlength="130" size="5">
            值操作：
            <input type="text" name="NewValueM1" id="Account" maxlength="3000" size="5" value="100">
            写入数据：
            <input type="text" name="WriteDataM1" id="Account" maxlength="3000" size="60"
                   value="00112233445566778899AABBCCDDEEFF">
            读出数据：
            <input type="text" name="ReadDataM1" id="Account" maxlength="3000" size="60">
            <form name="M1卡操作">
                <input type="button" onclick="javascript:RfCard()" value="寻卡">
                <input type="button" onclick="javascript:RfAuthenticationKey()" value="校验密码">
                <input type="button" onclick="javascript:RfRead()" value="读数据">
                <input type="button" onclick="javascript:RfWrite()" value="写数据">
                <input type="button" onclick="javascript:RfInitval()" value="初始化块值">
                <input type="button" onclick="javascript:RfReadval()" value="读块值">
                <input type="button" onclick="javascript:RfIncrement()" value="加值">
                <input type="button" onclick="javascript:RfDecrement()" value="减值">
                <input type="button" onclick="javascript:RfRestore()" value="回传">
                <input type="button" onclick="javascript:RfTransfer()" value="传送">
                <input type="button" onclick="javascript:RfTerminal()" value="中止卡片">
            </form>
        </fieldset>

        </br>

        <fieldset>
            <legend>操作非接触式CPU卡函数组</legend>
            <label>COS指令：
                <select name="cosdiscpu" id="st" onchange="discpumycos()">
                    <option value="0" SELECTED>取随机数08</option>
                    <option value="1">选择MF</option>
                </select>
            </label>
            写入数据：
            <input type="text" name="WriteDataDiscpu" id="Account" maxlength="3000" size="83" value="0084000008">
            读出数据：
            <input type="text" name="ReadDataDiscpu" id="Account" maxlength="3000" size="83">

            <form name="非接触式CPU卡操作">
                <input type="button" onclick="javascript:OpenCard5()" value="激活卡片">
                <input type="button" onclick="javascript:ExchangePro5()" value="发送命令">
            </form>
        </fieldset>
    </div>

    </br>

    <div>
        <button onclick="readDeviceCard()">读取卡片</button>
        :<input type="text" id="readDeviceCard">
        <button onclick="readData()">读取数据</button>
        :<input id="readData" type="text" maxlength="3000" size="60">
        <button onclick="writeData()">写入数据</button>
        :<input id="writeData" type="text" maxlength="3000" size="60" placeholder="长度为32位 字符规则(0-9|a-f)">
    </div>
</div>
<script src="${ctxPath}/static/modular/main/integralrecord/integralrecord_info.js"></script>
<script src="${ctxPath}/static/modular/main/integralrecord/html2canvas.js"></script>
<script src="${ctxPath}/static/modular/main/integralrecord/bluebird.js"></script>

<script src="${ctxPath}/static/device/device.js"></script>
<script>
    var temp_integral = parseInt($("#integral").val());
    $(function () {
        temp_integral = parseInt($("#integral").val());
    })
    $("#read").click(function () {
        products = new Array()
        loadProduct()

        getUserInfo();
        var memberId = $("#introducerId").val();
        $.ajax({
            url: '/membermanagement/getMemberInfo',
            data: {memberId: memberId},
            type: 'POST',
            async: false,
            success: function (data) {
                $("#introducerName").val(data.cadID);
                $("#name").val(data.name);
                $("#tel").val(data.phone);
                $("#memberId").val(data.id);
                $("#address").val(data.address);
                $("#integralSum").val(data.countPrice);
                $("#countPrice").val(data.integral);
                $("#levelID").val(data.levelID);
                $("#offNum").val(data.offNum);

            }
        });
    });
    $("#less").click(function () {

        var num = $("#consumptionNum").val();
        if (!isNaN(num)) {
            num = (parseInt(num) - 1) <= 0 ? 1 : parseInt(num) - 1;
            $("#consumptionNum").val(num);
            $("#integral").val(num * temp_integral)
        } else {
            $("#consumptionNum").val(1)
            $("#integral").val(temp_integral)
        }

    })
    $("#more").click(function () {
        var num = $("#consumptionNum").val();
        if (!isNaN(num)) {
            num = (parseInt(num) + 1) <= 0 ? 1 : parseInt(num) + 1;
            $("#consumptionNum").val(parseInt(num));
            $("#integral").val(num * temp_integral)
        } else {
            $("#consumptionNum").val(1)
            $("#integral").val(num * temp_integral)
        }
    })

</script>
<!--查询商品code展示商品信息-->
<script>
    $(function () {
        $(document).keypress(function (e) {
            if (e.keyCode == 13) {
                findCode()
                $("#scannerCode").val("")
            }
        })

    });

    var products = new Array();
    var productIds = "";
    var productNums = "";
    var productMianFeiNums = "";
    // array.push(值); //向数组中添加值

    // array.shift(值);//向数组中移除值
    var findCode = function () {
        var scannerType=$("#scannerType").val();
        var sumFree=0;
        if(scannerType==1){
            sumFree=1;
        }
        var scannerCode = $('#scannerCode').is(':focus');
        if (scannerCode) {
            var ajax = new $ax(Feng.ctxPath + "/integralrecordtype/findCode/" + $("#scannerCode").val(), function (data) {
                console.log(data)
                if (data != "error") {
                    if(products.length==0){

                        products.push(
                            {
                                key:data.id,
                                val:{
                                    id: data.id,
                                    productname: data.productname,
                                    productpice: data.productpice,
                                    productspecification: data.productspecification,
                                    productjifen:data.productjifen,
                                    retailPrice:data.retailPrice,
                                    consumptionNum:1,
                                    sumFree:sumFree
                                }
                            }
                        )
                    }else {
                        for(var i=0;i<products.length;i++){
                            var isHaveKey=true;
                            var isHaveKeyIndex=null;
                            for(var i=0;i<products.length;i++){
                                if(products[i].key==data.id){
                                    isHaveKey=false;
                                    isHaveKeyIndex=i;
                                }
                            }
                            if(isHaveKey){
                                products.push(
                                    {
                                        key:data.id,
                                        val:{
                                            id: data.id,
                                            productname: data.productname,
                                            productpice: data.productpice,
                                            productspecification: data.productspecification,
                                            productjifen:data.productjifen,
                                            retailPrice:data.retailPrice,
                                            consumptionNum:1,
                                            sumFree:sumFree
                                        }
                                    }
                                )
                            }else {
                                products[isHaveKeyIndex].val.consumptionNum+=1
                                products[isHaveKeyIndex].val.sumFree+=sumFree
                            }
                        }
                    }

                    loadProduct()
                } else {
                    alert("不存在该商品，或商品库存不足！")
                }

            }, function (data) {
            });
            ajax.set("productCode", $("#scannerCode").val());
            ajax.start();
        }


    }
    var yingshou=0;
    var shishou=0;
    var zhekou=0;
    function loadProduct() {
        $("#storeInfo").empty();
        $("#storeInfoHidden").empty();
        var play = 0;
        productIds = "";
        productNums = "";
        productMianFeiNums = "";
        var productjifen=0;
        for (var i = 0; i < products.length; i++) {
            // alert(products[i].val.productjifen)
            // alert(Number(products[i].val.productjifen*products[i].val.consumptionNum))
            // alert(productjifen+Number(products[i].val.productjifen*products[i].val.consumptionNum))
            // $("#scannerInfo").prepend("商品名称【" + products[i].val.productname + "】  规格：" + products[i].val.productspecification + " 价格：<span style='color: red'>" + products[i].val.productpice + "</span>  数量："+ products[i].val.consumptionNum+"<br>");
            $("#storeInfo").prepend("<tr>" +
                "<td>"+products[i].val.productname+"</td>" +
                "<td>"+products[i].val.productspecification+"</td>" +
                "<td>"+products[i].val.consumptionNum+"</td>" +
                "<td>"+products[i].val.retailPrice+"</td>" +
                "<td>"+(products[i].val.productpice * products[i].val.consumptionNum - products[i].val.productpice * products[i].val.sumFree)+"</td>" +"</tr>");
            $("#storeInfoHidden").prepend("<tr><td>"+products[i].val.productname+"</td><td>"+products[i].val.retailPrice+"</td><td>"+products[i].val.productpice+"</td><td>"+products[i].val.consumptionNum+"</td></tr>");

            play = play + (products[i].val.productpice*products[i].val.consumptionNum - products[i].val.productpice * products[i].val.sumFree)
            productIds += products[i].val.id + ","
            productNums += products[i].val.consumptionNum + ","
            productMianFeiNums+=products[i].val.sumFree+","
            productjifen+=Number(products[i].val.productjifen*products[i].val.consumptionNum)

        }
        $("#play").val(play*Number($("#offNum").val()));
        $("#integral").val(productjifen);

        tableBase64();

        //计算小票显示金额
        var j1=play;//总金额
        var j2=0;//应收金额
        var j3=0;//实收金额
        var off=1;
        off=Number($("#offNum").val());
        //
        j2=j1*off;
        var insaHtml=
            "<div>\n" +
            "            总金额：\n" +j1+
            "        </div>\n" +
            "        <div>\n" +
            "            优惠金额：\n" +(j1-j2)+
            "        </div>\n" +
            "        <div>\n" +
            "            应收金额：\n" +j2+
            "        </div>\n" ;
        yingshou=j2;
        shishou=j1;
        zhekou=(j1-j2);
        $("#hiden_moneyText").empty();
        $("#hiden_moneyText").append(insaHtml);
    }

</script>
<!--发验证码-->
<script>
    $("#sendCode i").attr("class","fa fa-paper-plane-o")
    $(function () {
        yzmBtn();
    })
    $("#sendCode").click(function () {
        if($("#memberId").val().length==0){
            Feng.error("请先读卡!");
            return;
        }
        var ajax = new $ax(Feng.ctxPath + "/verificationCode/add", function(data){
            Feng.success("发送成功!");
        },function(data){
            Feng.error("发送失败!" + data.responseJSON.message + "!");
        });
        ajax.set({memberId:$("#memberId").val()});
        ajax.start()
    })
    $("#playType").change(function () {
        yzmBtn();
    })
    function yzmBtn() {
        if($("#playType").val()==0){
            $("#hiddenYz").css("display","block")
        }else {
            $("#hiddenYz").css("display","none")
        }
    }
</script>
<!--html转图片base64-->
<script type="text/javascript">
    window.onload = function() {
        var show = document.getElementById("show");
        setInterval(function() {
            var time = new Date();   // 程序计时的月从0开始取值后+1
            var m = time.getMonth() + 1;
            var t = time.getFullYear() + "-" + m + "-"
                + time.getDate() + " " + time.getHours() + ":"
                + time.getMinutes() + ":" + time.getSeconds();
            show.innerHTML = "购买时间 "+t;
        }, 1000);
        var showHiden = document.getElementById("showHiden");
        setInterval(function() {
            var time = new Date();   // 程序计时的月从0开始取值后+1
            var m = time.getMonth() + 1;
            var t = time.getFullYear() + "-" + m + "-"
                + time.getDate() + " " + time.getHours() + ":"
                + time.getMinutes() + ":" + time.getSeconds();
            showHiden.innerHTML = "购买时间 "+t;
        }, 1000);
    };
</script>
<script>

var tableNase64Data="";
var tableNase64DataTemp="";
    function tableBase64() {
        tableNase64DataTemp=tableNase64Data;
        html2canvas(
            document.getElementById('map_canvasInfo')).then(function(canvas) {
                var imgData = canvas.toDataURL();
                //将图片转换为Base64
            tableNase64Data = imgData.substr(22);
                console.log(tableNase64Data)
            }
        );
    }
</script>
<script>
    // $("#scannerType").bind("change",function(){
    //    if($("#scannerType").val()==0){
    //        $("#scannerTypeContent").css("display","none")
    //    }else {
    //        $("#scannerTypeContent").css("display","block")
    //    }
    // });
</script>
@}
